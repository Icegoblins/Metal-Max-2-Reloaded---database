/* 声明字体 A：最像素 (用于海报信息) */
@font-face {
    font-family: 'zpix.ttf'; src: url('fonts/zpix.ttf') format('truetype'); /* 对应文件夹里的文件 */ font-weight: normal;  font-style: normal;  }
/* 声明字体 B：Obrazec (用于通缉海报悬赏金额) */
@font-face {
    font-family: 'Obrazec.ttf'; src: url('fonts/Obrazec.ttf') format('truetype'); /* 对应文件夹里的文件 */ font-weight: normal;  font-style: normal;  }

:root {
    --mm-green: #50ff7d;
    --mm-green-glow: rgba(80, 255, 125, 0.15);
    --mm-red: #ff3333;
    --bg-black: #050805;
    --iron-grey: #1a1c1a;
    /* 海报文字配色 */
    --poster-ink: #3e2723;
}

body {
    background-color: var(--bg-black);
    color: var(--mm-green);
    font-family: "Consolas", "Fixedsys", "Microsoft YaHei", monospace;
    margin: 0; padding: 15px;
    display: flex; flex-direction: column; height: 100vh;
    box-sizing: border-box; /* 极其重要：确保 padding 不撑大 body */
    overflow: hidden; /* 禁止全局滚动 */
    background-image: radial-gradient(circle at 50% 50%, #0a1a0a 0%, #040805 100%);
}

body::before {
    content: " "; display: block; position: absolute; top: 0; left: 0; bottom: 0; right: 0;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
    background-size: 100% 2px; z-index: 1000; pointer-events: none;
}

/* 顶部导航与Logo */
.top-bar {
    display: flex; align-items: center; justify-content: space-between;
    padding: 10px 20px; margin-bottom: 15px; background: rgba(80, 255, 125, 0.02); border-bottom: 1px solid #222;
}
.mm-logo { height: 100px; filter: drop-shadow(0 0 8px var(--mm-green-glow)); image-rendering: pixelated; }
.status-bridge { flex-grow: 1; margin: 0 40px; display: flex; flex-direction: column; gap: 8px; }
.status-text { display: flex; justify-content: space-between; font-size: 10px; color: var(--mm-green); opacity: 0.5; letter-spacing: 2px; }
.bridge-line { height: 2px; background: linear-gradient(90deg, transparent, var(--mm-green), transparent); box-shadow: 0 0 10px var(--mm-green-glow); }

.tabs { display: flex; gap: 8px; margin-bottom: 0; z-index: 20; }
.tab-btn {
    border: 2px solid #333; padding: 10px 25px;
    cursor: pointer; background: #111; color: #666;
    font-weight: bold; font-size: 16px;
    clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
    transition: 0.2s;
}
.tab-btn.active {
    background: var(--mm-green-glow); color: var(--mm-green);
    border-color: var(--mm-green); box-shadow: 0 0 15px var(--mm-green-glow);
}

.container {
    display: grid; grid-template-columns: 17% 1fr; gap: 15px;
    /* 核心修改：100vh 减去顶部栏高度(约100px)和边距 */
    height: calc(100vh - 150px);
    flex-grow: 1; overflow: hidden;
}

.search-bar {
    position: sticky;
    top: 0;
    z-index: 180;
    background: #0a0a0a; /* 必须有背景色遮挡滚动上去的内容 */
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}
/* 搜索结果的二级头部也要置顶，但位于 search-bar 下方 */
.search-result-header {
    position: sticky;
    top: 54px; /* 这里取决于 search-bar 的具体高度，需手动微调 */
    background: #0a0a0a;
    z-index: 190;
    border-bottom: 2px solid rgba(80, 255, 125, 0.2);
    box-shadow: 0 4px 10px rgba(0,0,0,0.8);
}

.list-panel {
    border: 4px double #444; background: rgba(0, 10, 0, 0.9);box-sizing: border-box;
    overflow-y: auto; box-shadow: inset 0 0 20px #000;height: 100%;display: flex;
    flex-direction: column;position: relative; /* 为 sticky 子元素提供容器引用 */
}
.list-item {
    padding: 15px 20px; border-bottom: 1px solid #1a1a1a;
    cursor: pointer; font-size: 16px; color: #4a6b4e;
}
.list-item:hover { color: var(--mm-green); background: rgba(80, 255, 125, 0.05); }
.list-item.selected { background: var(--mm-green); color: #000; font-weight: bold; }

.detail-panel {
    border: 5px solid var(--iron-grey); background: #080a08;
    padding: 2vh 2vw; position: relative; overflow-y: hidden;overflow-x: visible !important;height: 100%;
    display: flex; flex-direction: column; box-sizing: border-box; gap: 20px;

}
/* 移除可能导致高度塌陷或被截断的限制 */
.detail-panel > * {flex-shrink: 0;}

.top-section { display: flex;  gap: 3vw;align-items: flex-start;flex: 1 1 auto;min-height: 50vh;flex-shrink: 0; /* 防止顶部区域被底部文字挤压 */ }
.info-content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    min-width: 0; /* 防止子元素溢出 */
    overflow: visible !important;
}

/* --- 核心修改：多背景皮肤图片展示盒 --- */
.visual-box {
    height: 40vh;aspect-ratio: 3 / 4;flex: 0 0 calc(42vh * 0.75);
    border: 1.5px dashed var(--mm-green);
    background: #000; display: flex; justify-content: center; align-items: center;
    position: relative; overflow: hidden;flex-shrink: 0; /* 防止被右侧内容挤压变窄 */
    transition: background-color 0.3s, border-color 0.3s, opacity 0.3s;
}

/* 皮肤：赏金首 (海报底图) */
.visual-box.skin-赏金首 {
    border: none;
    background-image: url('img/shangjinshou_bg.png'); /* 请准备此底图 */
    background-size: 100% 100%;
    */:background-position:  center;
}

/* 皮肤：战车 (外框 + 内缩背景) */
.visual-box.skin-战车 {
    background-color: #051005;
    /* 1. 核心修改：增加内边距，厚度即为外框到内背景的距离 */
    box-sizing: border-box;
    padding: 20px;
    /* 2. 修复语法：在每个背景层之间必须加逗号 */
    background-image:
        url('img/zhanche_bg.png'),
        radial-gradient(circle at center, transparent 0%, #000 100%),
        linear-gradient(rgba(80, 255, 125, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(80, 255, 125, 0.1) 1px, transparent 1px);
    /* 3. 核心修改：让背景图片从 content 区域开始显示，从而实现“内缩” */
    background-origin: content-box;
    background-repeat: no-repeat;
    /* 4. 调整尺寸：确保每一层背景都有对应的尺寸控制 */
    /* 分别对应：底图(100%)、暗化径向(100%)、横向格线(30px)、纵向格线(30px) */
    background-size: 100% 100%, 100% 100%, 30px 30px, 30px 30px;
    background-position: center;
    /* 可选：增加内阴影，增强“屏幕”凹陷感 */
    box-shadow: inset 0 0 15px rgba(0,0,0,0.8);
}


/* 皮肤：人类装备 (蓝色扫描皮肤) */
.visual-box.skin-人类装备 {
    border: 1px solid #3399ff;
    background: radial-gradient(circle at center, #001a33 0%, #000 100%);
    box-shadow: inset 0 0 50px rgba(51, 153, 255, 0.2);
}

/* 怪物/物品图片适配 */
#img-container img {
    /* 1. 默认显示比例 */
    width: 70%;
    height: auto; /* 保证高度随宽度等比缩放 */

    /* 2. 强制上限限制：如果 80% 的宽度依然导致高度过长，则锁定高度 */
    /* 建议 max-height 设为比容器高度（520px）小一些的值，比如 360px */
    max-width: 70%;
    max-height: 180px;

    object-fit: contain;
    image-rendering: pixelated;
    z-index: 2;

    /* 增加平滑过渡，解决你之前担心的切换跳动问题 */
    transition: all 0.3s ease-in-out;
}

/* 海报模式下怪物图片的特殊定位 */
.skin-赏金首 #img-container {
    position: absolute; top: 45%; left: 50%;
    transform: translate(-50%, -50%);
    width: 70%; height: 55%;
    display: flex !important;
    justify-content: center;
    align-items: center;
    z-index: 2;
}

.skin-赏金首 #img-container img {
    max-width: 100%;max-height: min(25vh, 260px);
    object-fit: contain;image-rendering: pixelated; /* 保持像素风清晰度 */z-index: 2;
}

/* 海报文字叠加层 */
.poster-layer {
    display: none;
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    flex-direction: column; align-items: center; justify-content: flex-end;
    padding-bottom: 70px; pointer-events: none; z-index: 5;
}
.skin-赏金首 .poster-layer { display: flex; }

.poster-name { color: var(--poster-ink); font-size: clamp(6px, 2.5vh, 28px); /* 动态字号 */ font-weight: bold; margin-bottom: 0px; font-family: "zpix.ttf";}
.poster-money { color: var(--poster-ink); font-size: clamp(8px, 6vh, 80px); /* 动态字号 */ font-weight: 900; margin-bottom: 15px;font-family: "Obrazec.ttf";line-height: 1; }

/* 装饰元素自动适配 */
.visual-box::after { content: "[ V-LINK ACTIVE ]"; position: absolute; bottom: 5px; right: 8px; font-size: 9px; opacity: 0.6; color: var(--mm-red); }
.skin-赏金首 .scanning-line, .skin-赏金首::after { display: none; }
.skin-人类装备 .scanning-line { background: #3399ff; }

/* 右侧信息排版 */
.item-title-box { border-left: 5px solid var(--mm-green); padding-left: 15px; }
.item-name { font-size: 32px; color: #fff; text-shadow: 0 0 12px var(--mm-green); margin: 0; }
.stats-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; margin-top: 15px; border-top: 1px solid #222; padding-top: 15px;max-height: 50vh;overflow-y: auto;flex-shrink: 0; }
.stat-card { display: flex; flex-direction: column; border-bottom: 1px solid #151515; padding: 2px 5px; }
.stat-label { color: var(--mm-red); font-size: 14px;white-space: nowrap; margin-bottom: 3px; font-weight: bold; }
.stat-value { font-size: 20px; color: var(--mm-green);word-break: break-all; }
.desc-area { flex: 0 0 20vh;margin-top: 15px; padding: 15px; font-size: 18px; line-height: 1.8; background: rgba(80, 255, 125, 0.03);min-height: 0; /* Flex 布局下溢出滚动的关键 */ border-left: 5px solid var(--mm-red); white-space: pre-wrap; overflow-y: auto; }
.info-header { display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 1px solid var(--mm-green); padding-bottom: 6px; }
.system-status { font-size: 10px; color: var(--mm-green); text-align: right; opacity: 0.7; line-height: 1.2; }
.scanning-line { width: 100%; height: 1px; background: var(--mm-green); position: absolute; top: 0; opacity: 0.3; animation: scan 3s infinite linear; }
@keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

/* 1. 滚动条整体 */
::-webkit-scrollbar {
    width: 8px; /* 稍微加宽一点点，方便操作 */
    height: 8px;
    background-color: #050805;
}

/* 2. 滚动条轨道 */
::-webkit-scrollbar-track {
    background: rgba(80, 255, 125, 0.02);
    box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
}

/* 3. 滚动条滑块 - 基础状态 (灰色) */
::-webkit-scrollbar-thumb {
    background-color: #333333 !important; /* 强制基础颜色 */
    border-radius: 4px;
    border: 1px solid #444;
}

/* 4. 滑块悬停状态 (变绿) - 必须放在基础状态后面 */
::-webkit-scrollbar-thumb:hover {
    background-color: var(--mm-green) !important; /* 变成 MM 标志性绿色 */
    box-shadow: 0 0 15px var(--mm-green-glow);
    border: 1px solid #fff;
}

/* 5. 滑块被点击/激活状态 */
::-webkit-scrollbar-thumb:active {
    background-color: #fff !important; /* 点击时闪白，模拟电子触感 */
    box-shadow: 0 0 20px var(--mm-green);
}

/* 兼容 Firefox 的基础样式 */
* {
    scrollbar-width: thin;
    scrollbar-color: #333 #050805;
}

/* 属性图标样式 */
.prop-icon {
    width: 24px;
    height: 24px;
    display: inline-block; /* 强制块状化，防止行内偏移 */
    flex-shrink: 0;        /* 关键：防止在 Flex 布局中被挤压 */
    object-fit: contain;   /* 确保比例正确 */
    image-rendering: pixelated; /* 保持像素图标清晰 */
}

/* 掉落物项样式 */
.drop-item {
    color: var(--mm-green);
    background: rgba(80, 255, 125, 0.1);
    padding: 2px 8px;
    border-radius: 4px;
    margin-right: 8px;
    font-size: 16px;
    border: 1px solid rgba(80, 255, 125, 0.3);
    /* --- 新增内容 --- */
    cursor: pointer;           /* 将指针改为手型 */
    user-select: none;         /* 防止点击时选中文字 */
    display: inline-block;     /* 确保点击区域正确 */
}

/* 分类标题样式 */
.group-title {
    grid-column: 1 / -1; /* 横跨整行 */
    width: 100%;
    box-sizing: border-box;
    color: var(--mm-green);
    background: linear-gradient(90deg, rgba(80, 255, 125, 0.2), transparent);
    padding: 4px 10px;
    font-size: 14px;
    font-weight: bold;
    margin-top: 10px;
    border-left: 3px solid var(--mm-green);
}

.drop-item:hover {
    background: var(--mm-green);
    color: #000;
    box-shadow: 0 0 10px var(--mm-green-glow);
    transform: translateY(-2px);
    transition: all 0.2s;
}

/* 自定义弹窗遮罩层 */
.mm-modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85);
    display: none; justify-content: center; align-items: center;
    z-index: 666; backdrop-filter: blur(4px);
}

/* 弹窗主体容器 */
.mm-modal-box {
    width: 400px;
    background: #050805;
    border: 2px solid var(--mm-green);
    box-shadow: 0 0 20px var(--mm-green-glow), inset 0 0 15px rgba(0,0,0,0.8);
    position: relative;
    padding: 20px;
    animation: modalSlideIn 0.3s ease-out;
}

/* 警示模式皮肤 */
.mm-modal-box.warning {
    border-color: var(--mm-red);
    box-shadow: 0 0 20px rgba(255, 51, 51, 0.3);
}

/* 装饰性标题栏 */
.mm-modal-header {
    font-size: 12px; color: var(--mm-green);
    border-bottom: 1px solid #333;
    padding-bottom: 8px; margin-bottom: 15px;
    display: flex; justify-content: space-between;
    letter-spacing: 2px;
}

.mm-modal-content {
    color: #50FF7DFF; font-size: 18px; line-height: 1.6;
    margin-bottom: 25px; min-height: 60px;
    display: flex; align-items: center; gap: 15px;
}

/* 底部按钮区域 */
.mm-modal-footer { display: flex; justify-content: flex-end; }

.mm-btn {
    background: transparent; border: 1px solid var(--mm-green);
    color: var(--mm-green); padding: 8px 25px;
    cursor: pointer; font-family: inherit; font-size: 14px;
    transition: all 0.2s;
}

.mm-btn:hover { background: var(--mm-green); color: #000; box-shadow: 0 0 10px var(--mm-green); }

/* 进场动画 */
@keyframes modalSlideIn {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}
/* 职业矩阵容器 */
.job-grid {
    grid-column: 1 / -1;           /* 横跨详情页所有列 */
    display: grid;
    /* 强制 4 列，每列 100px 宽，防止横向拉伸占满 */
    grid-template-columns: repeat(8, 100px);
    /* 强制 2 行，每行 36px 高 */
    grid-template-rows: repeat(1, 36px);
    gap: 10px;
    padding: 15px 0;
    justify-content: flex-start;   /* 整体靠左对齐 */
}

/* 基础格子样式 */
.job-tag {
    box-sizing: border-box;
    border: 1px solid #444;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: #666; /* 默认未激活颜色 */
}

/* 激活状态通用颜色 (绿色) */
.job-tag.active { border-color: #00ff66; color: #00ff66; }

/* 特殊颜色类 */
.job-tag.active.male-limit { border-color: #00ccff; color: #00ccff; background: rgba(0, 204, 255, 0.1); }
.job-tag.active.female-limit { border-color: #ff66cc; color: #ff66cc; background: rgba(255, 102, 204, 0.1); }
.job-tag.active.dog-limit { border-color: #d4a76a; color: #d4a76a; background: rgba(212, 167, 106, 0.15); }
.job-tag.active.insect-limit { border-color: #00ffcc; color: #00ffcc; background: rgba(0, 255, 204, 0.15); }

/* 禁用状态 */
.job-tag.disabled { border-color: #00ff66; color: #00ff66; border-style: dashed; opacity: 0.3; }

/* 侧边栏容器需要开启滚动并允许 sticky 子元素 */
#item-list {
    height: 100%;
    overflow-y: auto;
    scrollbar-width: thin;
    position: relative; /* 为 sticky 提供参考 */
}




.title-text { font-weight: bold; flex: 1; }

.count-tag {
    font-size: 10px;
    background: rgba(80, 255, 125, 0.2);
    padding: 2px 6px;
    border-radius: 10px;
    margin-right: 10px;
}

.fold-icon { transition: transform 0.3s; }
.is-folded .fold-icon { transform: rotate(-90deg); }

/* 列表项样式 */
.group-item-list {
    margin: 0;
    padding: 0;
    list-style: none;
}

.nav-item {
    padding: 15px 20px;       /* 匹配原 list-item 的间距 */
    border-bottom: 1px solid #1a1a1a;
    cursor: pointer !important;
    font-size: 16px;          /* 匹配原字号 */
    color: #4a6b4e;           /* 匹配原未选中颜色 */
    transition: 0.2s;
    list-style: none;
}

.nav-item:hover { color: var(--mm-green);background: rgba(80, 255, 125, 0.05);}
.nav-item.active {background: var(--mm-green) !important;color: #000 !important;   /* 选中时文字变黑 */font-weight: bold;}
/* 2. 统一分组标题字体 (使其更符合 Hunter 终端风格) */
.sticky-group-header {
    position: sticky;
    top: 84px;
    z-index: 120;
    background: #050805;
    padding: 12px 20px;
    color: var(--mm-green);
    font-size: 18px;          /* 标题稍微大一点点 */
    font-family: "Consolas", monospace;
    border-left: 5px solid var(--mm-green);
    border-bottom: 2px solid rgba(80, 255, 125, 0.2);
    display: flex;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.8);
}
/* 悬停时稍微亮一点，但依然保持不透明 */
.sticky-group-header:hover {background-color: #0a1a0a;cursor: pointer;/* 将指针改为手型 */}

.title-text {
    letter-spacing: 1px;
}

/* 星级切换器容器 */
.star-selector-warp {
    display: flex;
    gap: 5px;
    margin-bottom: 15px;
}

.star-btn {
    flex: 1;
    background: #111;
    border: 1px solid #333;
    color: #666;
    padding: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: 0.2s;
}

.star-btn.active {
    background: var(--mm-green-glow);
    border-color: var(--mm-green);
    color: var(--mm-green);
    box-shadow: inset 0 0 10px var(--mm-green-glow);
}

.stat-diff.plus { color: #0f0; margin-left: 5px; font-weight: bold; }
.stat-diff.minus { color: #f00; margin-left: 5px; font-weight: bold; }

.branch-link {
    color: #00e5ff;
    text-decoration: underline;
    cursor: pointer;
    margin-bottom: 5px;
    font-size: 14px;
}
.branch-link:hover {
    color: var(--mm-green);
}

/* --- 折叠功能 --- */
.list-group-wrapper.is-folded .group-item-list { display: none; }
.fold-icon { transition: transform 0.3s; display: inline-block; margin-right: 5px; }
.is-folded .fold-icon { transform: rotate(-90deg); }

/* 列表分组标题：需要躲在搜索框(54px)和统计栏(约35px)后面 */
.list-group-wrapper .sticky-group-header {
    position: sticky;
    /* 如果正在全局搜索，这个 top 可能需要动态增加，
       或者你可以统一给它一个较大的偏移量 */
    top: 54px;
    z-index: 100;
}

/* --- 进化路线图 (Evolution Line) --- */
.evolution-track {
    display: flex;
    align-items: center;
    background: rgba(0,0,0,0.3);
    border: 1px; border-top: 1px solid #333;
    /* 核心修改：禁止纵向裁切，横向只有在真正溢出时才滚动 */
    overflow-x: visible;
    overflow-y: visible !important; /* 必须允许垂直方向溢出，否则弹窗会被切掉 */
    margin-bottom: 15px;
    margin-top: 15px;
    gap: 10px;
    box-sizing:border-box;
    /* 增加左右内边距，确保第一个和最后一个节点的弹窗有空间显示 */
    padding: 30px 0px 0px 20px;
    position: relative;
}

/* 2. 确保外层包裹层也不切割内容 */
.tank-render-wrapper {
    overflow: visible !important;
}

/* --- 进化路节点 --- */
.evo-node {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 80px;
    cursor: pointer;
    transition: 0.3s;
    position: relative;
    opacity: 1; /* 默认暗淡 */
}

.evo-node.active {
    opacity: 1 !important;transform: scale(1.1);
}

/* 激活状态下的圆点：核心高亮 */
.evo-node.active .node-circle {
    background: #fff !important; /* 选中时圆心变白，像灯泡中心 */
    border-color: var(--mm-green) !important;
    box-shadow:
        0 0 10px var(--mm-green),
        0 0 20px var(--mm-green),
        inset 0 0 4px var(--mm-green);
}

/* 激活状态下的文字 */
.evo-node.active .node-name {
    color: #fff;
    text-shadow: 0 0 8px var(--mm-green);
    font-weight: bold;
}

/* 悬停预览：增加一点反馈 */
.evo-node:hover {
    opacity: 0.8;
}

/* --- 进化路节点结束 --- */

.node-circle {
    width: 12px; height: 12px; border-radius: 50%;
    background: #444; margin-bottom: 5px; position: relative;
}
.node-name { font-size: 10px; color: #fff; text-align: center; white-space: nowrap; }
.evo-line { flex: 1; height: 1px; background: #333; min-width: 20px; }

/* --- 进度条 --- */
.progress-container { width: 100%; background: #111; height: 6px; margin: 8px 0; border: 1px solid #333; }
.progress-bar { height: 100%; background: var(--mm-green); transition: width 0.5s cubic-bezier(0.1, 0.7, 0.1, 1); box-shadow: 0 0 8px var(--mm-green); }

/* --- 搜索栏 --- */
.search-box { padding: 10px; background: #0a0a0a; border-bottom: 1px solid #333; position: sticky; top: 0; z-index: 1000; }
.search-box input {
    width: 100%; background: #000; border: 1px solid #333; color: var(--mm-green);
    padding: 8px; font-family: monospace; outline: none;
}

/* 改造分支悬浮窗基础样式 */
.evo-popover {
    display: none; /* 默认隐藏 */
    position: absolute;
    bottom: 45px; /* 位于圆点上方 */
    left: 50%;
    transform: translateX(-50%);
    width: 160px;
    background: rgba(5, 10, 5, 0.95);
    border: 1px solid #50ff7d;
    padding: 10px;
    border-radius: 4px;
    font-size: 11px;
    z-index: 10000;
    box-shadow: 0 0 15px rgba(0,0,0,0.8), 0 0 5px var(--mm-green);
    pointer-events: none; /* 防止鼠标滑入悬浮窗导致闪烁 */
}

/* 悬停显示逻辑 */
.evo-node:hover .evo-popover {
    display: block;
    animation: popFadeIn 0.2s ease-out;
}

/* 内部行样式 */
.pop-row {
    display: flex;
    justify-content: space-between;
    margin-top: 3px;
    color: #888;
}

/* 装饰小三角 */
.evo-popover::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border-width: 6px;
    border-style: solid;
    border-color: #50ff7d transparent transparent transparent;
}

/* 简单的进入动画 */
@keyframes popFadeIn {
    from { opacity: 0; transform: translate(-50%, 5px); }
    to { opacity: 1; transform: translate(-50%, 0); }
}

/* 修正节点本身的暗淡问题 */
.evo-node {
    opacity: 0.6; /* 未选中时稍微透明 */
    transition: 0.3s;
}
.evo-node:hover, .evo-node.active {
    opacity: 1; /* 悬停或选中时全亮 */
}
/* 改造分支悬浮窗基础样式结束 */

/* 模拟赏金首掉落物样式的跳转卡片 */
.drop-item-link {
    color: var(--mm-green);
    background: rgba(80, 255, 125, 0.1);
    padding: 2px 8px;
    border-radius: 4px;
    margin-right: 8px;
    font-size: 16px;
    border: 1px solid rgba(80, 255, 125, 0.3);
    /* --- 新增内容 --- */
    cursor: pointer;           /* 将指针改为手型 */
    user-select: none;         /* 防止点击时选中文字 */
    display: inline-block;     /* 确保点击区域正确 */
}

.drop-item-link:hover {
    background: var(--mm-green);
    color: #000;
    box-shadow: 0 0 10px var(--mm-green-glow);
    transform: translateY(-2px);
    transition: all 0.2s;
}

.drop-tag {
    font-size: 100px;
    color: #888;
    text-transform: uppercase;
}

/* 点唱机专属布局 */
.jukebox-wrapper {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 20px;
    height: 100%;
    padding: 20px;
    box-sizing: border-box;
}

/* 左侧：播放器视觉区 */
.player-core {
    background: rgba(0, 20, 0, 0.3);
    border: 1px solid #333;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
}

/* 动态频谱容器 */
/* 频谱样式优化 */
.v-canvas {
    display: flex;
    align-items: flex-end; /* 确保条形图向上跳动 */
    gap: 2px;
    height: 150px;
    padding: 0 10px;
}

.v-bar {
    width: 6px;
    margin: 0 1px;
    /* JS 会动态覆盖这里的 background */
    background: var(--mm-green);
    box-shadow: 0 0 8px var(--mm-green-glow);
    transition: height 0.1s ease;
    /* 建议在 CSS 里设置一个底部圆角，顶部直角，更有 UI 感 */
    border-radius: 1px 1px 0 0;
}

/* 右侧：曲目列表 */
.track-list-panel {
    border-left: 1px solid #333;
    padding-left: 20px;
    overflow-y: auto;
}

.music-item {
    padding: 15px;
    border: 1px solid #222;
    margin-bottom: 10px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    transition: 0.2s;
}

.music-item:hover {
    background: rgba(80, 255, 125, 0.1);
    border-color: var(--mm-green);
}

.music-item.active {
    background: var(--mm-green);
    color: #000;
}

/* 当点唱机激活时，如果想要全屏效果，可以调整比例 */
body:has(#t-点唱机.active) .list-panel {
    border-right: 1px dashed #222;
    background: #000;
}

/* 唱片旋转动画占位 */
.disc-vinyl-placeholder {
    width: 100px;
    height: 100px;
    border: 5px solid #333;
    border-radius: 50%;
    background: repeating-radial-gradient(#111, #222 10%, #111 15%);
    animation: rotate 4s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* 磁带/唱片占位图样式 */
.disc-vinyl-placeholder {
    width: 120px;
    height: 120px;
    background: radial-gradient(circle, #222 30%, #000 70%);
    border-radius: 50%;
    border: 4px solid #333;
    position: relative;
    animation: rotateDisc 5s linear infinite;
    box-shadow: 0 0 20px rgba(80, 255, 125, 0.2);
}

.disc-vinyl-placeholder::after {
    content: "";
    position: absolute;
    top: 50%; left: 50%;
    width: 20px; height: 20px;
    background: var(--mm-green);
    border-radius: 50%;
    transform: translate(-50%, -50%);
}

@keyframes rotateDisc {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* 右侧专业面板主框架 */
.pro-player-console {
    display: flex; flex-direction: column; height: 100%;
    padding: 20px; background: #050a05; border: 1px solid #1a331a; box-sizing: border-box;
}


.v-bar {
    width: 8px; margin: 0 2px; background: var(--mm-green);
    box-shadow: 0 0 8px var(--mm-green); transition: height 0.1s ease;
}
.scan-line {
    position: absolute; top: 0; left: 0; width: 100%; height: 2px;
    background: rgba(80, 255, 125, 0.1); animation: scan 3s linear infinite;
}
@keyframes scan { from { top: 0; } to { top: 100%; } }

/* 进度条 */
.playback-bar { margin: 15px 0; }
/* 进度条背景 */
.prog-bar-bg {
    height: 6px;
    background: #111;
    border: 1px solid #333;
    position: relative;
    cursor: pointer;
    margin-top: 20px;
    overflow: visible; /* 必须允许圆点溢出 */
}

/* 悬停时圆点放大效果 */
.prog-bar-bg:hover #prog-bar-inner::after {
    transform: translateY(-50%) scale(1.3);
    background: var(--mm-green);
}
/* 进度条内部绿色填充 */
#prog-bar-inner {
    height: 100%;
    background: var(--mm-green);
    width: 0%; /* 初始值 */
    position: absolute;
    left: 0;
    top: 0;
    box-shadow: 0 0 10px var(--mm-green-glow);
    /* 关键：去掉 transition 以免切换 Tab 时出现飞入动画 */
    transition: none;
}
/* 进度条上的动态小圆点 - 始终跟随 inner 宽度 */
#prog-bar-inner::after {
    content: "";
    position: absolute;
    right: -6px; /* 居中于填充边缘 */
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;
    background: #fff;
    border: 2px solid var(--mm-green);
    border-radius: 50%;
    box-shadow: 0 0 10px #fff, 0 0 20px var(--mm-green);
    z-index: 10;
}
prog-bar-bg:hover #prog-bar-inner::after {opacity: 1; /* 鼠标移入进度条区域时显示 */}

#time-display {
    font-size: 11px;
    color: var(--mm-green);
    opacity: 0.8;
    font-family: 'Consolas', monospace;
    margin-top: 8px;
    text-align: right;
}

/* 交互区 */
.interaction-grid {
    display: flex;
    gap: 20px;
    justify-content: space-between;
    align-items: center;
    background: rgba(255,255,255,0.03);
    padding: 15px;
    border-radius: 4px;
}

/*音量控制条*/
.vol-control {
    display: flex;
    align-items: center;
    gap: 10px;
    /* --- 修改这里 --- */
    flex: 0 0 150px;    /* 固定宽度 150px，不再伸缩 */
    justify-content: flex-end; /* 内容向容器右侧对齐 */
    font-size: 12px;
    white-space: nowrap;
}
.vol-control input {width: 120px; flex: 0.6; accent-color: var(--mm-green); cursor: pointer; }
.btn-group { display: flex; gap: 8px; margin-left: auto; margin-right: auto;}
.status-row { display: flex; justify-content: space-between; font-size: 10px; opacity: 0.6; margin-bottom: 5px; }

/* 修饰特效 */
.glitch-text { font-size: 20px; margin: 5px 0; letter-spacing: 1px; color: var(--mm-green); }
.blink { animation: b 1s infinite; color: #fff; }
@keyframes b { 50% { opacity: 0; } }

/* 监视器内部水平排列 */
.monitor-layout {
    display: flex;
    gap: 25px;
    height: 25vh;
    margin-bottom: 20px;
}

/* 示波器监视器 */
.monitor-section {
    flex: 1; background: #000; border: 2px solid #111; position: relative;height: 100%;
    display: flex; align-items: flex-end; justify-content: center; overflow: hidden; margin-bottom: 20px;
}

/* 封面边框 */
.cover-frame {
    width: auto;
    height: 25vh;
    border: 2px solid #1a331a;
    background: #000;
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
}

#track-art {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.8;
    /* 极客滤镜：绿调 + 降噪 */
    filter: sepia(1) hue-rotate(70deg) brightness(0.9) contrast(1.2);
}

/* 封面上的闪烁波纹特效 */
.frame-glitch {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: repeating-linear-gradient(
        0deg,
        transparent 0px,
        rgba(80, 255, 125, 0.05) 1px,
        transparent 2px
    );
    pointer-events: none;
}

/* 打字机容器基础样式 */
#desc-text {
    white-space: pre-wrap; /* 保留换行 */
    word-break: break-all;
    position: relative;
    display: inline-block;
    width: 100%;
}

/* 光标样式 */
#desc-text::after {
    content: "█"; /* 使用方块光标，更有重装机兵/终端感 */
    margin-left: 2px;
    color: var(--mm-green, #50ff7d);
    animation: blink 0.8s infinite;
    vertical-align: middle;
}

/* 擦除时的滤镜效果 */
#desc-text.erasing {
    filter: blur(1px);
    opacity: 0.7;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}